<!-- header -->
<header id="site-header">
    <div class="navbar navbar-inverse">
        <div class="container">
            <div class="navbar-header">
                <a href="/home" class="navbar-brand">Asset Management</a>
            </div>

            <ul class="nav navbar-nav">
                <li><a href="/home">Home</a></li>
                <li><a href="/home/create">Create an Asset</a></li>
                <li><a href="/home/assignmentHistory">Assignment History</a></li>
                <li><a href="/home/logout">Log Out</a></li>
            </ul>
        </div>
    </div>
</header>

<% if (success.length > 0) { %>
  <div class="alert alert-success"><%= success %></div>
  <% } %>
  
  <div class="jumbotron text-center">
    <h1>Assignment History</h1>
    <h2>of All Assets</h2>
  </div>
  <div class="row" id="search-col">
      <div class="col-lg-12">
          <input type="search" id="search" value="" class="form-control" 
          placeholder="Search using Asset Description">
      </div>
  </div>
  <div>
    <table class="table table-bordered table-hover table-striped">
      <thead>
        <tr>
          <th id='Sno'>S.No</th>
          <th id='AssetHeader'>Asset Description</th>
          <th>History</th>
          <!-- <th colspan="4">&ensp;&ensp;&ensp;
            Owner &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;
            Email&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
            QA/Dev &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;
            From &ensp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;&ensp;&ensp;&ensp;
            To&emsp;&emsp13;</th>
        </tr> -->
      </thead>
  
      <tbody>
          <% for (var i=0; i<allHistory.length ; i++) { %>
        <tr id='hist'>
            <td><%= i+1 %></td>
          <td><%= allHistory[i].AssetDescription_fk %></td>
          
          <% if(allHistory[i].historyArr.length>0) { %>
          <th>
            <table class="table table-bordered table-hover table-striped">
              <thead>
            <th>Owner</th>
          <th style="width: 1%">QA/Dev</th>
          <th>From</th>
          <th>To</th>
          <th>Comments</th>
              </thead>
              <tbody>
                <% for (var hist of allHistory[i].historyArr.reverse()) { %>
  
          <td class='hist-data'><%= hist.email %></td>
          <td class='hist-data'><%= hist.userType %></td>
          <td class='hist-data'><%= hist.fromDate %></td>
          <td class='hist-data'><%= hist.toDate %></td>
          <td class='hist-data'><%= hist.comment %></td>
        </tr>
        <% } %>
      </tbody>
  
    </table>
    </t>
    <% } %>
    <% if(allHistory[i].historyArr.length==0) { %>
    <td></td>
    <% } %>
    </tr>
    <% } %>
    </tbody>
    </table>
  </div>
  <script src="/javascript/assignmentHistory.js"></script>